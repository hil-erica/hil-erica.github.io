<!DOCTYPE html>

<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>影分身</title>
<link rel="shortcut icon" href="./pics/ninja.ico" type="image/vnd.microsoft.icon">

<!--Boostrap https://getbootstrap.jp/docs/5.0/getting-started/download/-->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!--Bootstrap icon https://icons.getbootstrap.com/ -->

<!--Bootstrap password https://bootstrap-show-password.wenzhixin.net.cn/home/-->
<script src="https://unpkg.com/bootstrap-show-password@1.2.1/dist/bootstrap-show-password.min.js"></script>
<!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">


<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jimp/0.16.2-canary.1052.1235.0/jimp.min.js"></script>-->
<!-- ROS -->
<script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script src="https://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

<!--floating window library-->
<script src="https://cdn.jsdelivr.net/npm/jsframe.js/lib/jsframe.min.js"></script>

<!-- skyway -->
<script src="https://cdn.webrtc.ecl.ntt.com/skyway-4.3.0.js"></script>

<link rel="stylesheet" href="./css/video.css">
<link rel="stylesheet" href="./css/device.css">
<link rel="stylesheet" href="./css/ui.css">
<link rel="stylesheet" href="./css/setting.css">
<link rel="stylesheet" href="./css/optiononpage.css">


<!--自身のカメラの順番を入れ替える-->
<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

<script src="./js/deSVG.js"></script>
<script src="./js/device.js"></script>
<script src="./js/ui.js"></script>
<script src="./js/communication.js"></script>
<script src="./js/skyway.js"></script>
<script src="./js/control.js"></script>
<script src="./js/chat.js"></script>
<script src="./js/gamecontroller.js"></script>
<script src="./js/option.js"></script>
<!--<script src="./js/optiononpage.js"></script>-->
<script src="./js/sharescreen.js"></script>
<script src="./js/information.js"></script>
<script src="./js/externalwebsite.js"></script>
<!--<script src="./js/recorder.js"></script>-->
<script src="./js/globals.js"></script>
<script src="./js/setting.js"></script>
<script src="./js/mediastreamer.js"></script>
<script src="./js/ros.js"></script>

<!-- split.js -->
<script src="https://unpkg.com/split.js/dist/split.min.js"></script>

</head>
<body>

<nav class="navbar navbar-expand-md navbar-light bg-light" id="navbar">
	<div class="container-fluid">
		<img src="./pics/kurima-folder.png" alt="" width="30" height="24" class="d-inline-block align-top" onclick="lockScreenOnOff()">
		<!--狭くなったときのショートカット-->
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-md-0">
				<!--users and chat-->
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#" onclick="openCommunication()">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16">
							<path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
						</svg>
						<!--
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-left-text" viewBox="0 0 16 16">
							<path d="M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
							<path d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
						</svg>
						-->
					</a>
				</li>
				
				<!--device-->
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#" data-bs-toggle="modal" data-bs-target="#deviceModal">
						<!--
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-camera-video" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2V5zm11.5 5.175 3.5 1.556V4.269l-3.5 1.556v4.35zM2 4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h7.5a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H2z"/>
						</svg>
						-->
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-headset" viewBox="0 0 16 16">
							<path d="M8 1a5 5 0 0 0-5 5v1h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6a6 6 0 1 1 12 0v6a2.5 2.5 0 0 1-2.5 2.5H9.366a1 1 0 0 1-.866.5h-1a1 1 0 1 1 0-2h1a1 1 0 0 1 .866.5H11.5A1.5 1.5 0 0 0 13 12h-1a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1V6a5 5 0 0 0-5-5z"/>
						</svg>
					</a>
				</li>
				
				<!--recorder-->
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#" r data-bs-toggle="modal" data-bs-target="#recorderModal" id="recordericon">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-record-circle" viewBox="0 0 16 16">
							<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
							<path d="M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
						</svg>
						<!--
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-record-circle-fill" viewBox="0 0 16 16">
							<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-8 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
						</svg>
						-->
					</a>
				</li>
				
				<!--hand pose-->
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="handGestureDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						<!--<img class="svg_notselected navicon" id="handImg" src="./pics/gestures/palmup-right.svg" alt="" width="24" height="24">-->
						<img id="handImg" src="./pics/gestures/palmup-right.svg" alt="" width="24" height="24">
					</a>
					<ul class="dropdown-menu" aria-labelledby="handGestureDropdownMenuLink">
						<li><a class="dropdown-item-custom" href="#" name="handgesture" handpose="palmup" onclick='handSelected("palmup")'><img class="svg_notselected navicon" src="./pics/gestures/palmup-right.svg" alt="" width="24" height="24">palm up</a></li>
						<li><a class="dropdown-item-custom" href="#" name="handgesture" handpose="pointing" onclick='handSelected("pointing")'><img class="svg_notselected navicon" src="./pics/gestures/pointing-right.svg" alt="" width="24" height="24">pointing</a></li>
						<li><a class="dropdown-item-custom" href="#" name="handgesture" handpose="palmside" onclick='handSelected("palmside")'><img class="svg_notselected navicon" src="./pics/gestures/palmside-right.svg" alt="" width="24" height="24">palm side</a></li>
						<li><a class="dropdown-item-custom" href="#" name="handgesture" handpose="raisehand" onclick='handSelected("raisehand")'><img class="svg_notselected navicon" src="./pics/gestures/raisehand-right.svg" alt="" width="24" height="24">raise hand</a></li>
					</ul>
				</li>
				
				<!--face-->
				<li class="nav-item dropdown">
					<a id="faceImg" class="nav-link dropdown-toggle" href="#" id="faceDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-neutral" viewBox="0 0 16 16">
							<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
							<path d="M4 10.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5zm3-4C7 5.672 6.552 5 6 5s-1 .672-1 1.5S5.448 8 6 8s1-.672 1-1.5zm4 0c0-.828-.448-1.5-1-1.5s-1 .672-1 1.5S9.448 8 10 8s1-.672 1-1.5z"/>
						</svg>
					</a>
					<ul class="dropdown-menu" aria-labelledby="faceDropdownMenuLink">
						<li>
							<a class="dropdown-item-custom" href="#" name="facialexpression" face="auto" onclick='faceSelected("auto")'>
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-neutral" viewBox="0 0 16 16">
									<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
									<path d="M4 10.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5zm3-4C7 5.672 6.552 5 6 5s-1 .672-1 1.5S5.448 8 6 8s1-.672 1-1.5zm4 0c0-.828-.448-1.5-1-1.5s-1 .672-1 1.5S9.448 8 10 8s1-.672 1-1.5z"/>
								</svg>
							auto
							</a>
						</li>
						<li>
							<a class="dropdown-item-custom" href="#" name="facialexpression" face="positive" onclick='faceSelected("positive")'>
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-smile" viewBox="0 0 16 16">
									<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
									<path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
								</svg>
							positive
							</a>
						</li>
						<li>
							<a class="dropdown-item-custom" href="#" name="facialexpression" face="negative" onclick='faceSelected("negative")'>
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-frown" viewBox="0 0 16 16">
									<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
									<path d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.498 3.498 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.498 4.498 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
								</svg>
							negative
							</a>
						</li>
					</ul>
				</li>
				
				<!--optional application-->
				<!--
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#"  onclick="openOption()">
					<a class="nav-link active" aria-current="page" href="#"  onclick="showOptionAppPane()">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-app-indicator" viewBox="0 0 16 16">
							<path d="M5.5 2A3.5 3.5 0 0 0 2 5.5v5A3.5 3.5 0 0 0 5.5 14h5a3.5 3.5 0 0 0 3.5-3.5V8a.5.5 0 0 1 1 0v2.5a4.5 4.5 0 0 1-4.5 4.5h-5A4.5 4.5 0 0 1 1 10.5v-5A4.5 4.5 0 0 1 5.5 1H8a.5.5 0 0 1 0 1H5.5z"/>
							<path d="M16 3a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
						</svg>
					</a>
				</li>
				-->
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-app-indicator" viewBox="0 0 16 16">
							<path d="M5.5 2A3.5 3.5 0 0 0 2 5.5v5A3.5 3.5 0 0 0 5.5 14h5a3.5 3.5 0 0 0 3.5-3.5V8a.5.5 0 0 1 1 0v2.5a4.5 4.5 0 0 1-4.5 4.5h-5A4.5 4.5 0 0 1 1 10.5v-5A4.5 4.5 0 0 1 5.5 1H8a.5.5 0 0 1 0 1H5.5z"/>
							<path d="M16 3a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
						</svg>
					</a>
					<ul class="dropdown-menu" aria-labelledby="optionalappDropdownMenuLink">
						<li>
							<a class="dropdown-item-custom" href="#" onclick='openOption()'>
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-up" viewBox="0 0 16 16">
									<path fill-rule="evenodd" d="M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1h-2z"/>
									<path fill-rule="evenodd" d="M7.646.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 1.707V10.5a.5.5 0 0 1-1 0V1.707L5.354 3.854a.5.5 0 1 1-.708-.708l3-3z"/>
								</svg>
							floating
							</a>
						</li>
						<li>
							<a class="dropdown-item-custom" href="#" name="facialexpression" face="positive" onclick='showOptionAppPane()'>
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-down" viewBox="0 0 16 16">
									<path fill-rule="evenodd" d="M3.5 6a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5h-2a.5.5 0 0 1 0-1h2A1.5 1.5 0 0 1 14 6.5v8a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-8A1.5 1.5 0 0 1 3.5 5h2a.5.5 0 0 1 0 1h-2z"/>
									<path fill-rule="evenodd" d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
								</svg>
							on top
							</a>
						</li>
					</ul>
				</li>

				<!--shared screen-->
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#"  onclick="openShareScreen()">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-display" viewBox="0 0 16 16">
							<path d="M0 4s0-2 2-2h12s2 0 2 2v6s0 2-2 2h-4c0 .667.083 1.167.25 1.5H11a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h.75c.167-.333.25-.833.25-1.5H2s-2 0-2-2V4zm1.398-.855a.758.758 0 0 0-.254.302A1.46 1.46 0 0 0 1 4.01V10c0 .325.078.502.145.602.07.105.17.188.302.254a1.464 1.464 0 0 0 .538.143L2.01 11H14c.325 0 .502-.078.602-.145a.758.758 0 0 0 .254-.302 1.464 1.464 0 0 0 .143-.538L15 9.99V4c0-.325-.078-.502-.145-.602a.757.757 0 0 0-.302-.254A1.46 1.46 0 0 0 13.99 3H2c-.325 0-.502.078-.602.145z"/>
						</svg>
					</a>
				</li>
				
				<!--setting application-->
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#" data-bs-toggle="modal" data-bs-target="#settingModal">
					<!--<a class="nav-link active" aria-current="page" href="#"  onclick="openSetting()">-->
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sliders" viewBox="0 0 16 16">
							<path fill-rule="evenodd" d="M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"/>
						</svg>
					</a>
				</li>
				
				<!--information-->
				<li class="nav-item">
					<a class="nav-link active" aria-current="page" href="#"  onclick="openInformation()" id="infoicon">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
							<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
							<path d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
						</svg>
					</a>
				</li>
			</ul>
			
			<!--
			<div class="d-flex" style="margin-right: 30px">
				<div class="form-check form-switch">
					<input class="form-check-input" type="checkbox" id="debugcheckbox" onchange="showControlPane()">
					<label class="form-check-label" for="debugcheckbox">debug</label>
				</div>
			</div>
			-->
			
			<div class="d-flex" style="margin-right: 30px">
				<div class="form-check form-switch">
					<input class="form-check-input" type="checkbox" id="teleopemodecheckbox" onchange="teleOpeModeChanged()">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-index-thumb" viewBox="0 0 16 16">
						<path d="M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 0 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 1 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.118a.5.5 0 0 1-.447-.276l-1.232-2.465-2.512-4.185a.517.517 0 0 1 .809-.631l2.41 2.41A.5.5 0 0 0 6 9.5V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v6.543L3.443 6.736A1.517 1.517 0 0 0 1.07 8.588l2.491 4.153 1.215 2.43A1.5 1.5 0 0 0 6.118 16h6.302a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"/>
					</svg>
					<!--<label class="form-check-label" for="teleopemodecheckbox">tele-ope mode</label>-->
				</div>
			</div>
			<div class="d-flex" style="margin-right: 20px">
				<div class="form-check form-switch">
					<input class="form-check-input" type="checkbox" id="mutecheckbox" checked>
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic" viewBox="0 0 16 16">
						<path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5z"/>
						<path d="M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0v5zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3z"/>
					</svg>
					<!--<label class="form-check-label" for="mutecheckbox">mic</label>-->
				</div>
			</div>
			<div class="d-flex">
				<input id="saytext" class="form-control me-4" type="text" placeholder="Speech Text" aria-label="Say" autocomplete="off">
				<button class="btn btn-outline-success" type="button" onclick="clickSay()">Say</button>
			</div>

		</div>
	</div>
</nav>

<!--<div class="masonry" style="height: 340px;">-->
<div id="backgroundimg" class="backgroundimgcontainer">
</div>
<div id="workspace">
	<div id="optionapp" class="optionpane">
		<div id="controllers" class="box-text-controllers">
			<ui>
				<a href="#" id="controller">
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-controller" viewBox="0 0 16 16">
						<path d="M11.5 6.027a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2.5-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm-6.5-3h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/>
						<path d="M3.051 3.26a.5.5 0 0 1 .354-.613l1.932-.518a.5.5 0 0 1 .62.39c.655-.079 1.35-.117 2.043-.117.72 0 1.443.041 2.12.126a.5.5 0 0 1 .622-.399l1.932.518a.5.5 0 0 1 .306.729c.14.09.266.19.373.297.408.408.78 1.05 1.095 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.816-.059 1.602-.328 2.21a1.42 1.42 0 0 1-1.445.83c-.636-.067-1.115-.394-1.513-.773-.245-.232-.496-.526-.739-.808-.126-.148-.25-.292-.368-.423-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.423-.243.282-.494.575-.739.808-.398.38-.877.706-1.513.773a1.42 1.42 0 0 1-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772a2.34 2.34 0 0 1 .433-.335.504.504 0 0 1-.028-.079zm2.036.412c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 0 0-.748 2.295 12.351 12.351 0 0 0-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 0 0 .426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.504C4.861 9.969 5.978 9.027 8 9.027s3.139.942 3.965 1.855c.164.181.307.348.44.504.214.251.403.472.615.674.318.303.601.468.929.503a.42.42 0 0 0 .426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 0 0-.339-2.406 13.753 13.753 0 0 0-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z"/>
					</svg>
				</a>
			</ul>
		</div>
		<div id="gesture" class="box-text-gestures">
			<!--g,b,r3種類64*64サイズ用意すること，以下に追加するだけでスクリプトの修正は不要-->
			<!--documentからアクセスしやすいようoption.jsから追加
			<a href="#" name="gesture" gesture="nodding" id="nodding">
				<img src="pics/gestures/nodding-g.gif"name="gesture" alt="nodding">
			</a>
			<a href="#" name="gesture" gesture="greeting" id="greeting">
				<img src="pics/gestures/greeting-g.gif"name="gesture" alt="greeting">
			</a>
			-->
		</div>
		<div id="optionalcommands" class="box-text-optionalcommands">
			<input type="file" id="optionalcommandfile" class="box-text-optionalinput" aria-describedby="optionalcommandfileAddon" aria-label="UploadOptionFile" multiple>
			<br>
			<div id="optionalbuttons" class="box-text-optionalcommandbuttons">
			</div>
		</div>
		
	</div>
	<div id="main" class="maincontainers">
	</div>
	
	<div id="sub" class="subcontainers">
	</div>

	<div id="controlpane" class="controlpane">
	</div>
	
</div>
<!--
<div id="workspace">
	<div id="main" class="maincontainers">

	</div>
	
	<div id="sub" class="subcontainers">
	</div>
</div>
-->
<!-- Modal for set up-->
<div class="modal fade" id="setupModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="setupModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="setupModalLabel">Setup</h5>
				<!--<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>--></div>
				<div class="modal-body">
					<button id="devices_button" class="btn btn-primary" onclick="getDeviceList()"><font size="3">get devices</font></button><br>
					<div class="box-text-user">
						<div class="row mb-3">
							<div class="col-sm-4">
								<input class="form-control" id="myuserid" placeholder="Enter the user id">
							</div>
							<div class="col-sm-8">
								<input  id="apiKey"data-toggle="password" class="form-control" type="password" placeholder="Enter the api key">
							</div>
						</div>
						
					</div>
					
					<div class="box-text-mic" id="micsetting">
						<div class="row mb-3">
							<div class="col-sm-4">
								<label for="micvolumeslider" class="form-label">mic volume</label><br>
								<input type="range" class="form-range" min="0" max="3.4" id="micvolumeslider" value="1" step="0.01">
		          				</div>
	          					<div class="col-sm-4">
								<label for="mic_list" class="form-label">device id</label>
								<select id="mic_list" class="form-select form-select-sm" aria-label="device id">
		          						<option>(audio)</option>
		          					</select>
		          				</div>
		          				<div class="col-sm-4">
								<label for="micdelayinput" class="form-label">additional transmit delay[sec]</label><br>
								<input type="number" id="micdelayinput" value="0" min="0" max="1" step="0.01"> 
		          				</div>
		          				<div class="col-sm-4">
								<label for="echocancelselector" class="form-label">echo cancel</label>
								<select id="echocancelselector" class="form-select form-select-sm" aria-label="echo cancel"></select>
							</div>
							<div class="col-sm-4">
		          					<!--<div class="form-check form-switch">-->
		          					<div class="form-check form-switch">
									<input class="form-check-input" type="checkbox" id="noisesuppressionchkbox">
									<label class="form-check-label" for="noisesuppressionchkbox">noise suppression</label>
								</div>
							</div>
							<div class="col-sm-4">
		          					<!--<div class="form-check form-switch">-->
		          					<div class="form-check form-switch">
									<input class="form-check-input" type="checkbox" id="autogainchkbox">
									<label class="form-check-label" for="autogainchkbox" title="only when no noise suppression, noise suppression automatically auto gain control on.">auto gain</label>
								</div>
							</div>
						</div>
						<div class="row mb-3">
							<div class="col-sm-4">
								<button id="mic_test" class="btn btn-secondary btn-sm" onclick="micTestRecord()" disabled="true"><font size="3">mic test(start recording)</font></button>
							</div>
						</div>
					</div>
					
					<div class="box-text-speaker"  id="speakersetting">
						<div class="row mb-3">
							<div class="col-sm-4">
								<label for="speaker_list" class="form-label">device id</label>
								<select id="speaker_list" class="form-select form-select-sm" aria-label="device id">
									<option>(speaker)</option>
								</select>
		          				</div>
						</div>
						<div class="row mb-3">
							<div class="col-sm-4">
								<button id="speaker_test"class="btn btn-secondary btn-sm" onclick="speakerTest()" disabled="true"><font size="3">speaker test</font></button>
							</div>
						</div>
					</div>
					
					<div class="box-text-camera">
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" id="streaming2local">
							<label class="form-check-label" for="streaming2local">streaming videos to local sockets</label>
						</div>
						
						<div id="local_cameras" class="horizontal-list"></div>
					</div>
				</div><!--model body-->
			<div class="modal-footer">
				<button id="step_button" type="button" class="btn btn-primary" onclick="gotoStandby()" disabled="true">Ready</button>
				<!--<button id="step_button" type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="standbyDevice()" disabled="true">Ready</button>-->
				<!--<button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="gotoStandby()"  disabled="true">Ready</button>-->
			</div>
		</div>
	</div>
</div>

<!--device-->
<div class="modal fade" id="deviceModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="deviceModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="deviceModalLabel">Device</h5>
				<!--<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
			</div>
			<div class="modal-body">
				<div id="micsetting_onnav"></div>
				<div id="speakersetting_onnav"></div>
				<div class="box-text-camera" id ="deviceonnavi">
					<div id="local_cameras_onnav" class="horizontal-list">
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!--record-->
<div class="modal fade" id="recorderModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="recorderModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="recorderModalLabel">Recorder</h5>
				<!--<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
			</div>
			<div class="modal-body">
				<button id="recorder_button" type="button" class="btn btn-primary"  onclick="startstoprecord()">start recording</button>
				<!--<button id="recorder_button" type="button" class="btn btn-primary"  onclick="startstoprecord()" disabled="true">start recording</button>-->
				&nbsp;<a href="./utils/MediaTools.zip">WebM Tools</a>
				<!--<a href="#" id="downloadlink">download all(large size zipping is not supportted)</a>-->
				<div id="download_each"></div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!--setting-->
<div class="modal fade" id="settingModal" data-bs-keyboard="false" tabindex="-1" aria-labelledby="settingModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="settingModalLabel">Settings</h5>
			</div>
			<div class="modal-body">
				
				<div class="row  mb-3">
					<div class="box-text-externalwebsite">
						<div class="input-group  input-group-sm">
							<span class="input-group-text">external web site url</span>
							<input type="text" class="form-control" placeholder="https://127.0.0.1/erica_database/console/realtime/display_realtime_dialog_simple.php" id="externalweb_url" aria-describedby="externalweb_url_input" value="https://127.0.0.1/erica_database/console/realtime/display_realtime_dialog_simple.php" autocomplete="off"/>
							<button class="btn btn-outline-primary" type="button" id="open_externalweb">Open</button>
						</div>
					</div>
				</div>
				
				<div class="row  mb-3">
					<div class="box-text-websocket">
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" id="wsockautoconnect">
							<label class="form-check-label" for="wsockautoconnect">websocket autoconnect</label>
						</div>
						<div class="input-group  input-group-sm">
							<span class="input-group-text">web socket url</span>
							<input type="text" class="form-control" placeholder="wss://127.0.0.1:8000" id="socket_url" aria-describedby="websocketbutton" value="wss://127.0.0.1:8000" autocomplete="off"/>
							<button class="btn btn-outline-primary" type="button" id="websocketbutton">Connect</button>
						</div>
						<label class="h6">access https protocol at first time to install a ssl certificate</label>&nbsp;<a class="h6" id="installcertificateLink" href="https://127.0.0.1:8000"  target="_blank" rel="noopener">https://127.0.0.1:8000</a>
					</div>
				</div>
				
				<div class="row  mb-3">
					<div class="box-text-mediastreamer">
						<!--
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" id="mediastreamsocketautoconnect">
							<label class="form-check-label" for="mediastreamsocketautoconnect">MediaStream socket autoconnect</label>
						</div>
						-->
						<label class="h6">Set the first web socket port number</label>
						<div class="input-group  input-group-sm">
							<span class="input-group-text">websocket url</span>
							<input type="text" class="form-control" placeholder="wss://127.0.0.1" id="mediastream_socket_url" aria-describedby="mediastreamwebsocketbutton" value="wss://127.0.0.1" autocomplete="off"/>
							<span class="input-group-text">local media first port:</span>
							<input type="number" class="form-control" placeholder="8100" id="local_mediastream_socket_port" aria-describedby="mediastreamwebsocketbutton" value="8100" autocomplete="off"/>
							<span class="input-group-text">remote media firsrt port:</span>
							<input type="number" class="form-control" placeholder="8200" id="remote_mediastream_socket_port" aria-describedby="mediastreamwebsocketbutton" value="8200" autocomplete="off"/>
							<button class="btn btn-outline-primary" type="button" id="mediastreamwebsocketbutton">Start Streaming</button>
						</div>
						<label class="h6">access https protocol at first time to install a ssl certificate</label>&nbsp;<a class="h6" id="installcertificateLink4LocalMediaStreamer" href="https://127.0.0.1:8100"  target="_blank" rel="noopener">https://127.0.0.1:8100</a>&nbsp;<a class="h6" id="installcertificateLink4RemoteMediaStreamer" href="https://127.0.0.1:82000"  target="_blank" rel="noopener">https://127.0.0.1:8200</a>
						&nbsp;<a href="./utils/SSLWebSocketUDPStreamer.zip">SSLWebSocketUDPStreamer</a>&nbsp;<a href="./utils/UDPStreamingReceiver.zip">UDPStreamingReceiver</a>
					</div>
				</div>
				
				<!--
				<div class="row  mb-3">
					<div class="box-text-ros">
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" id="rosautoconnect">
							<label class="form-check-label" for="rosautoconnect">ROS autoconnect</label>
						</div>
						<div class="input-group  input-group-sm">
							<span class="input-group-text">ros frame_id header</span>
							<input type="text" class="form-control" placeholder="camera_and_urg_" id="ros_frameid_header"  value="camera_and_urg_" autocomplete="off"/>
						</div>
						<div class="input-group  input-group-sm">
							<span class="input-group-text">ros web socket url</span>
							<input type="text" class="form-control" placeholder="wss://127.0.0.1:10090" id="ros_socket_url" aria-describedby="roswebsocketbutton" value="wss://127.0.0.1:10090" autocomplete="off"/>
							<button class="btn btn-outline-primary" type="button" id="roswebsocketbutton">Connect</button>
						</div>
						<label class="h6">access https protocol at first time to install a ssl certificate</label>&nbsp;<a class="h6" id="installcertificateLink4ROS" href="https://127.0.0.1:10090"  target="_blank" rel="noopener">https://127.0.0.1:10090</a>
					</div>
				</div>
				-->
				
				<div class="row  mb-3">
					<div class="box-text-otheroptions">
						<div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" id="answerRequestBehavorSelect" checked>
							<label class="form-check-label" for="answerRequestBehavorSelect">Answer Behavor Request</label>
						</div>
					</div>
				</div>
				<!--
				<div class="row  mb-3">
					<div class="box-text-otheroptions">
						<div id="roscanvases">
							
						</div>
					</div>
				</div>
				-->
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<!--操作選択をさせるモーダル-->
<div class="modal fade" id="requestSelectModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="requestSelectModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
		<div class="modal-content modal-content-clear">
			<div class="modal-header">
				<h5 class="modal-title" id="requestSelectModalLabel">Select</h5>
			</div>
			<div class="modal-body modal-body-clear" id="requestSelectModalBody">
				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal"  onclick="canncelSelectRequest()" id="canncelButtonSelectRequest">Cancel</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="requestInputModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="requestInputModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">
		<div class="modal-content modal-content-clear">
			<div class="modal-header">
				<h5 class="modal-title" id="requestInputModalLabel">Input</h5>
			</div>
			<div class="modal-body modal-body-clear" id="requestInputModalBody">
				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-bs-dismiss="modal"  onclick="answerRequest()">Send</button>
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal"  onclick="canncelInputRequest()" id="canncelButtonInputRequest">Cancel</button>
			</div>
		</div>
	</div>
</div>

<!--start animation-->
<div class="start">
    <!--<p><img src="./pics/teleoperation-akari.png" alt="" onclick="lockScreenOnOff()"></p>-->
    <p><video id="lockscreenvideo" src="./videos/teleoperation.mp4" muted autoplay playinline loop onclick="lockScreenOnOff()" width="480"></p>
</div>

<script>

$(window).on('load',function(){
    $('#setupModal').modal('show');
});

window.onload = ()=> {
	initialize();
	getQueryParams();
	imgNumber = getRandomInt(backImgs.length);
}

$(function(){
	//documentに加わっているものを探してImgとReplaceする
	deSVG('.svg_selected',true);
	deSVG('.svg_notselected',true);
});

var lockOnOff = false;
$(function() {
	setTimeout(function(){
		$('.start p').fadeIn(1600);
		lockOnOff = true;
	},500); //0.5秒後にロゴをフェードイン!
	setTimeout(function(){
		$('.start').fadeOut(750);
		lockOnOff = false;
	},3000); //2.5秒後にロゴ含め真っ白背景をフェードアウト！
});

function lockScreenOnOff(){
	if(!lockOnOff){
		$('.start').fadeIn(1600);
		$('.start p').fadeIn(1600);
		lockOnOff = true;
		console.log("lock screen");
	} else {
		$('.start').fadeOut(750);
		lockOnOff = false;
		console.log("unlock screen");
	}
}


var imgNumber = 0;
var backImgs = ["./pics/kagebunshin-in.svg"];
function getRandomInt(max) {
	return Math.floor(Math.random() * max);
}

/*
var split = Split(['#main', '#sub'], {
	direction: 'vertical',
	gutterSize: 10,
	snapOffset: 0,
	sizes: [200, 100],
	minSize: [300, 200]
})
*/
var split;
function fadeInBodyImg(speed){
	//console.log("fade in");
	//speed[msec] フェードイン・フェードアウトの処理時間（1000で1秒）
	$('#backgroundimg').fadeOut(speed,function(){
		// 背景画像番号変更
		// 背景画像を変更しフェードイン
		imgNumber ++;
		if(imgNumber >= backImgs.length){
			imgNumber = 0;
		} 
		$(this).css({"background-image":"url("+backImgs[imgNumber]+")"}).fadeIn(speed);
		if(split != null){
			split.destroy();
			split = null;
		}
	});
}

function fadeOutBodyImg(speed){
	//speed[msec] フェードイン・フェードアウトの処理時間（1000で1秒）
	//console.log("fade out");
	$('#backgroundimg').fadeOut(speed,function(){
		//フェードアウト後に大きさチェック
		/*
		split = Split(['#main', '#sub'], {
			direction: 'vertical',
			gutterSize: 12,
			snapOffset: 0,
			sizes: [200, 100],
			minSize: [300, 220]
		});
		calcMainContainersSize();
		calcSubContainersSize();
		*/
		setSplitMinSize();
	});
}

function setSplitMinSize(){
	var numMain = document.getElementsByClassName("maincontainer").length;
	var numSub = document.getElementsByClassName("subcontainer").length;
	var mainHeight = 300;
	var subHeight = 220;
	
	if(numMain > 0){
		document.getElementById("main").style.display ="";
	} else {
		document.getElementById("main").style.display ="none";
	}
	if(numSub > 0){
		document.getElementById("sub").style.display ="";
	} else {
		document.getElementById("sub").style.display ="none";
	}
	
	if(numMain <= 0 || numSub <= 0){
		if(split != null){
			split.destroy();
			split = null;
		}
	} else {
		if(split == null){
			split = Split(['#main', '#sub'], {
				direction: 'vertical',
				gutterSize: 12,
				snapOffset: 0,
				sizes: [200, 100],
				minSize: [mainHeight, subHeight]
			});
		}
		
	}
	//console.log("numMain = "+numMain+", numSub = "+numSub+", "+mainHeight+"/"+subHeight);
	calcMainContainersSize();
	calcSubContainersSize();
}

document.getElementById("saytext").onkeypress = (e) => {
	const key = e.keyCode || e.charCode || 0;
	// 13はEnterキーのキーコード
	if (key == 13) {
		clickSay();
	}
}


const resizeObserver = new ResizeObserver(entries => {
	for (const entry of entries) {
		// 変更を検知した要素
		// 検知した変更の矩形
		const rect = entry.contentRect;
		//console.log(rect.top, rect.left);
		//console.log(rect.width, rect.height);
		var element = document.getElementById(entry.target.id);
		//console.log(entry.target.id + " "+rect.width+"/"+rect.height+" "+element.style.width+"/"+element.style.height +" "+window.getComputedStyle(element).width+"/"+window.getComputedStyle(element).height);
		if(entry.target.id == "main"){
			calcMainContainersSize();
		} else if(entry.target.id == "sub"){
			calcSubContainersSize();
		}
	}
});
resizeObserver.observe(document.getElementById("main"));
resizeObserver.observe(document.getElementById("sub"));

</script>

</body>
</html>
